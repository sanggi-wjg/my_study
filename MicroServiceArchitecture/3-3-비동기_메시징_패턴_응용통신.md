# 비동기 메시징 패턴 응용 통신
비동기 메시징은 메시지 브로커를 사용하는 경우 브로커 없이 서비스가 직접 하는 경우가 있다.  

### 메시지
메시지는 Header와 Body 로 구성.  
브로커를 사용하는 경우 메시지 채널을 통해서 교환 된다. 

## 메시징 상호작용
클라이언트/서비스는 한 쌍의 메시지를 주고받는 비동기 요청/응답 스타일로 상호작용 한다.

클라이언트는 수행 작업과 매개변수를 메시징 요청 채널에 보내고
서비스는 요청 처리 후 메시지 응답 채널로 응답 한다.

클라이언트 → 요청 채널 → 서비스 → 응답 채널 → 클라이언트  

### 구현 방법
1. **단방향 알림** 
비동기 메시징을 이용하여 클라이언트만 서비스에 요청하고 서비스는 응답 하지 않음

1. **발행/구독**
메시징은 발행/구독 스타일을 기본 지원한다.   
클라이언트는 여러 Consumer가 읽는 발행/구독 채널에 발행하고 서비스는 요청에 대해 이벤트를 발행. 
`이때 이벤트 발행한 서비스는 발행/구독 채널을 소유.`

1. **발행/비동기 응답**
클라이언트는 응답 채널 헤더(CorrealtionId)를 포함한 메시지를 발행/구독 채널에 발행하고   
Consumer는 헤더를 확인 후 지정된 응답 채널에 응답 메시지 작성.  
응답을 받은 클라이언트는 요청과 응답의 CorrelationId를 비교